# go-start v0.1.0 MVP 开发计划

## 📊 当前进度

**完成时间**: 2025-12-26
**产品可用性**: 70%
**距离 MVP v0.1.0**: 还需 3-5 天

---

## ✅ 已完成的工作 (2025-12-26)

### 阶段 1: Bug 修复 (已完成 ✅)

#### P0-1: Repository 方法重复生成 ✅
**问题**: 生成的 Repository 文件有重复的方法定义
**影响**: 代码无法编译
**修复**: 在 `pkg/gen/types.go` 中添加索引字段去重逻辑
**测试**: users.go 从 199 行减少到 162 行，无重复方法
**Commit**: `7cd85f9`

#### P0-2: 路由文件生成不完整 ✅
**问题**: auto_routes.go 在第 26 行截断
**影响**: 缺少路由注册代码，无法使用
**修复**: 修复模板注释中的未定义变量
**测试**: auto_routes.go 从 29 行增加到 46 行，完整可用
**Commit**: `961bc22`

### 阶段 2: 文档整理 (已完成 ✅)

**文档优化**:
- 删除了 12 个冗余文档
- 新增 3 个核心文档 (STATUS.md, GEN_DB_TEST_REPORT.md, DOCS_INDEX.md)
- 更新 README.md，更加简洁清晰
**Commit**: `0a803ee`

---

## 🔥 当前阶段 - P1 修复 (进行中)

### 需求 1: 添加 --module 参数支持 🔥🔥🔥

**状态**: 🔧 进行中 (50% 完成)
**问题**: 生成的代码使用硬编码的模块路径 `github.com/yourname/project`
**影响**: 生成的代码无法直接编译，需要手动修改所有 import 路径

**已完成的修改**:
- ✅ 添加 `genModule` 变量到 cmd/go-start/gen.go
- ✅ 添加 `--module` 参数到 gen db 命令
- ✅ 在 `gen.Config` 中添加 `Module` 字段
- ✅ 在 `gen/types.go` 中添加 `getModulePath()` 辅助方法
- ✅ Repository 层使用 `getModulePath()`

**待完成的修改**:
- ❌ Service 层需要使用 `getModulePath()`
- ❌ Controller 层需要使用 `getModulePath()`
- ❌ Routes 层需要使用 `getModulePath()`
- ❌ 需要验证编译和测试

**预计剩余时间**: 2 小时

---

## 📋 MVP v0.1.0 功能清单

### Sprint 1: 核心体验 (3-5 天)

| 功能 | 状态 | 优先级 | 剩余时间 |
|-----|------|--------|----------|
| P0-1 Repository 去重 | ✅ 完成 | P0 | - |
| P0-2 路由完整性 | ✅ 完成 | P0 | - |
| P1-3 模块路径参数 | 🔧 进行中 | P0 | 2h |
| P1-4 自动生成 go.mod | ⏳ 待开始 | P0 | 2h |
| P1-5 可运行的 main.go | ⏳ 待开始 | P0 | 2h |
| 快速开始文档 | ⏳ 待开始 | P0 | 2h |

### Sprint 2: 文档和演示 (2-3 天)

| 功能 | 状态 | 优先级 | 预计时间 |
|-----|------|--------|----------|
| 演示视频/GIF | ⏳ 待开始 | P1 | 3h |

---

## 🎯 MVP 发布标准

### 必须满足 (P0)

- [✅] gen db 命令可以生成完整的 CRUD 代码
- [✅] 生成的代码包含 Model、Repository、Service、Controller、Routes
- [ ] 支持自定义模块路径 (`--module` 参数)
- [ ] 自动生成 go.mod
- [ ] 生成可运行的 main.go
- [ ] 支持 MySQL、PostgreSQL

### 代码质量

- [✅] 没有 P0 级别的 bug
- [✅] Repository 方法无重复
- [✅] 路由文件完整
- [ ] 生成的代码可以编译通过
- [ ] 生成的代码可以运行

### 用户体验

- [ ] 命令行参数有清晰的错误提示
- [✅] 生成的代码有详细注释
- [ ] 有快速开始文档
- [ ] 有演示视频/GIF
- [ ] 新人能在 5 分钟内跑起来

---

## 🚀 下一步行动

### 立即执行 (今天 - 2小时)

**完成 P1-3: 模块路径参数**

剩余任务:
1. 修复 Service 层的模块路径
2. 修复 Controller 层的模块路径
3. 修复 Routes 层的模块路径
4. 验证编译
5. 端到端测试

验收标准:
```bash
# 可以成功运行
./go-start gen db \
  --dsn="root:pass@tcp(localhost:3306)/testdb" \
  --tables=users \
  --output=./demo \
  --module=github.com/demo/my-api

cd demo
go mod init github.com/demo/my-api
go mod tidy  # ✅ 成功，没有硬编码路径错误
go build ./...  # ✅ 编译成功
```

### 明天 (4-6 小时)

**P1-4: 自动生成 go.mod**
- 生成代码时自动创建 go.mod
- 自动添加必要的依赖
- 自动运行 go mod tidy

**P1-5: 生成可运行的 main.go**
- 生成 cmd/server/main.go
- 包含数据库初始化
- 自动注册路由
- 生成配置文件示例

### 后天 (2-3 小时)

**快速开始文档**
- QUICKSTART.md 更新
- 包含完整的 5 分钟上手指南
- 常见问题 FAQ

---

## 💡 开发原则 (重要!)

### ✅ 正确做法

1. **一次只做一件事**
   - 完成一个功能，测试，提交，再做下一个
   - 不要同时修改多个文件

2. **小步快跑，频繁提交**
   - 每修复一个 bug 就提交
   - 每完成一个功能就测试
   - 不要累积太多更改

3. **每次修改都验证编译**
   - 修改代码后立即编译
   - 确保不破坏已有功能
   - 使用 git bisect 找问题

### ❌ 错误做法

1. ❌ 批量替换多个文件
2. ❌ 一次性修改多个功能
3. ❌ 不测试就继续下一步
4. ❌ 代码坏了还继续写新功能

---

## 📊 进度跟踪

### Week 1 (本周)
- [x] Day 1: Bug 修复 (P0-1, P0-2)
- [ ] Day 2-3: P1-3 模块路径参数
- [ ] Day 4: P1-4 go.mod + P1-5 main.go
- [ ] Day 5: 文档和测试

### Week 2 (下周)
- [ ] P1-5 Service 层索引方法
- [ ] 交互式向导
- [ ] 错误提示优化
- [ ] 进度条显示

---

## 🎁 MVP 成功标准

**核心目标**: 新人小白能在 5 分钟内从数据库生成到运行 API

**验证流程**:
1. 准备测试数据库 (1分钟)
2. 运行 gen db 命令 (1分钟)
3. 编译项目 (1分钟)
4. 运行服务器 (1分钟)
5. 测试 API (1分钟)

如果这个流程顺畅无阻，MVP 就成功了！
